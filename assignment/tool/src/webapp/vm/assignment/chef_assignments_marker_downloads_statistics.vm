<script>
	$(document).ready(function() {
		$(document).on("click", ".glyphicon", function() {
			$eventSource = $(this);
			$parentAssignmentDiv = $eventSource.closest(".assignments");
			
			// Check if down arrow was clicked
			if($eventSource.hasClass("glyphicon-chevron-down")) {
				// Get next item before insert
				$nextAssignmentDiv = $parentAssignmentDiv.next();
				$parentAssignmentDiv.insertAfter($nextAssignmentDiv);
				
				if($nextAssignmentDiv.is(":first-child")) {
					$nextAssignmentDiv.find(".icon-container").empty().append('<span class="glyphicon glyphicon-chevron-down"></span>');
				} else {
					$nextAssignmentDiv.find(".icon-container").empty().append('<span class="glyphicon glyphicon-chevron-up"></span><span class="glyphicon glyphicon-chevron-down"></span>');
				}
				
				if($parentAssignmentDiv.is(":last-child")) {
					$parentAssignmentDiv.find(".icon-container").empty().append('<span class="glyphicon glyphicon-chevron-up"></span>');
				} else {
					$parentAssignmentDiv.find(".icon-container").empty().append('<span class="glyphicon glyphicon-chevron-up"></span><span class="glyphicon glyphicon-chevron-down"></span>');
				}
			} else if($eventSource.hasClass("glyphicon-chevron-up")) { // Check if down up was clicked
				// Get previous item before insert
				$prevAssignmentDiv = $parentAssignmentDiv.prev();
				$parentAssignmentDiv.insertBefore($prevAssignmentDiv);
				
				if($prevAssignmentDiv.is(":last-child")) {
					$prevAssignmentDiv.find(".icon-container").empty().append('<span class="glyphicon glyphicon-chevron-up"></span>');
				} else {
					$prevAssignmentDiv.find(".icon-container").empty().append('<span class="glyphicon glyphicon-chevron-up"></span><span class="glyphicon glyphicon-chevron-down"></span>');
				}
				
				if($parentAssignmentDiv.is(":first-child")) {
					$parentAssignmentDiv.find(".icon-container").empty().append('<span class="glyphicon glyphicon-chevron-down"></span>');
				} else {
					$parentAssignmentDiv.find(".icon-container").empty().append('<span class="glyphicon glyphicon-chevron-up"></span><span class="glyphicon glyphicon-chevron-down"></span>');
				}
			}
		});
	});
</script>
<!-- start: chef_assignments_marker_downloads_statistics.vm  -->
<div class="portletBody container-fluid">
	#navBarHREF( $allowAddAssignment $withGrade $allowGradeSubmission $allowAddAssignment $allowRecoverAssignment $allowAllGroups $assignmentscheck $allowUpdateSite $enableViewOption $view "markerdownstats" )

	<div class="page-header" id="marker_downloads_statistics">
        <h1>
			$tlang.getString("markerdownstats")
		</h1>
	</div>
	#if (!$!assignments.hasNext())
		<p class="instruction">
			$tlang.getString("gen.thearecur1")
		</p>
	#else
		<div class="panel-default">
			#set( $assignmentCount = 0 )
			#foreach( $assignment in $assignments)
				#set ($assignmentReference = $!service.assignmentReference($assignment.Id))
				#set($assignmentProperties=$!assignment.getProperties())
				<div class="assignments">	
					<div class="panel-heading" style="background: #fafafa; padding-left: 5px;">
						<h4 style="margin-top: 0px; margin-bottom: 0px;">
							$validator.escapeHtml($!assignment.Title)
							<span class="icon-container" style="display: block; float: right">
								#if( $NumberOfFoundAssignments > 1 )
									#if( $assignmentCount == 0 )
										<span class="glyphicon glyphicon-chevron-down"></span>
									#elseif( $assignmentCount !=  ($NumberOfFoundAssignments - 1))
										<span class="glyphicon glyphicon-chevron-up"></span>
										<span class="glyphicon glyphicon-chevron-down"></span>
									#else
										<span class="glyphicon glyphicon-chevron-up"></span>
									#end
								#end
							</span>
						</h4>
					</div>
					<div class="panel-body">
						<table class="table table-striped table-bordered">
							<thead>
								<tr style="background: #FAFAFA; font-weight: inherit">
									<th>Name of Marker</th>
									<th>Role</th>
									<th>Download</th>
									<th>Upload</th>
									<th>Download All</th>
									<th>In/Out/Total</th>
								</tr>	
							</thead>
							<tbody>
								#set($counter = 0)
								#set( $markers = ["Jansen van Vuuren, CJ (12345678)", "Knoetze, A (11111111)", "JSeemonster, S (22222222)"] )
								#set( $roles = ["Instructor", "Teaching Assistant", "Marker"] )
								#set( $stats = ["2/20/25", "50/70/200", "3/10/100"] )
								#foreach( $marker in $markers )
									<tr #if( $counter % 2 == 0) style="background: #fff" #else style="background: #f9f9f9" #end>
										<td>$!marker</td>
										<td>$roles.get($counter)</td>
										<td><a href="#">Download</a></td>
										<td><a href="#">Upload</a></td>
										<td><a href="#">Download All</a></td>
										<td>$stats.get($counter)</td>
									</tr>
									#set( $counter = $counter + 1 )
								#end
							</tbody>	
						</table>
					</div>
				</div>
				#set( $assignmentCount  = $assignmentCount + 1 )
			#end
		</div>
	#end
</div>	
<!-- end: chef_assignments_marker_downloads_statistics.vm  -->